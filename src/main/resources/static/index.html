<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Sign In / Sign Up</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; padding: 50px; }
        form { display: inline-block; margin-top: 20px; }
        input, button { display: block; margin: 10px auto; padding: 8px; width: 200px; }
    </style>
</head>
<body>
<h1>Welcome</h1>
<h2>Please Sign In or Sign Up</h2>

<!-- Sign In Form -->
<form id="signInForm">
    <h3>Sign In</h3>
    <input type="text" id="signInUsername" placeholder="Username" required>
    <input type="password" id="signInPassword" placeholder="Password" required>
    <button type="submit">Sign In</button>
</form>

<!-- Sign Up Form -->
<form id="signUpForm">
    <h3>Sign Up</h3>
    <input type="text" id="signUpUsername" placeholder="Username" required>
    <input type="password" id="signUpPassword" placeholder="Password" required>
    <button type="submit">Sign Up</button>
</form>

<script>
    document.getElementById('signInForm').addEventListener('submit', async (event) => {
        event.preventDefault();
        const response = await fetch('/user/sign-in', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                username: document.getElementById('signInUsername').value,
                password: document.getElementById('signInPassword').value
            })
        });
        const token = await response.text();
        if (response.ok) {
            sessionStorage.setItem('token', token);
            window.location.href = 'users.html';
        } else {
            alert('Sign-in failed');
        }
    });

    document.getElementById('signUpForm').addEventListener('submit', async (event) => {
        event.preventDefault();
        await fetch('/user/add', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                username: document.getElementById('signUpUsername').value,
                password: document.getElementById('signUpPassword').value
            })
        });
        alert('Sign-up successful! Please sign in.');
    });
</script>
</body>
</html>
